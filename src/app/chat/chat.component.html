<div class="row">
    <div class="col-3">
        <app-sidebar></app-sidebar>
    </div>
    <div class="col-8">

        <section style="background-color: rgb(255, 255, 255);">

            <div class="container py-6"></div>

            <div class="card" id="chat1" style="border-radius: 15px;">
                <div
                    class="card-header d-flex justify-content-between
                    align-items-center p-3 bg-info text-white
                    border-bottom-0"
                    style="border-top-left-radius: 15px;
                    border-top-right-radius: 15px;">
                    <i class="fas fa-angle-left"></i>
                    <p class="mb-0 fw-bold">Live chat</p>

                </div>

                <div class="card-body" style="position: relative; height:
                    500px" >
                    <div class=" px-2 scroll  " >

                        <div *ngFor="let i of all"  >
                            <div *ngIf="currentUser.idEtudiant!==i.sender?.idEtudiant">
                                <div class="d-flex flex-row justify-content-start
                                    mb-4">
                                    <img
                                        src="{{this.service.host+'/api/authentication/image/'+i.sender?.idEtudiant}}"
                                        alt="avatar 1" style="width: 45px;
                                        height:
                                        100%;">
                                    <div class="p-3 ms-3 " style="border-radius:
                                        15px; background-color: rgba(71, 29, 223, 0.2);"  >
                                        <p class="small mb-0 ">{{i.content}}</p>
                                    </div>
                                </div>
                            </div>
                            <div *ngIf="i.sender?.idEtudiant===currentUser.idEtudiant">
                                <div class="d-flex flex-row justify-content-end
                                    mb-4">

                                    <div class="p-3 me-3 border"
                                        style="border-radius: 15px;
                                        background-color: #fbfbfb;">

                                        <p class="small mb-0">{{i.content}}</p>
                                    </div>
                                 
                                    <img
                                        src="{{this.service.host+'/api/authentication/image/'+i.sender?.idEtudiant}}"
                                        alt="avatar 1" style="width: 45px;
                                        height: 100%;">
                                </div>
                            </div>
                        </div>
                    </div>
                </div> 
                <form #loginForm=ngForm>
                    <div class="form-outline">
                        <textarea autocomplete="off"
                            [formControl]="newMessage"
                            class="form-control" id="textAreaExample"
                            placeholder=" Type Your Message..."
                            name="newmessage" [(ngModel)]="newmessages"
                            required rows="4"></textarea>
                        <label class="form-label" for="textAreaExample"></label>
                        <button class="btn btn-primary"
                            (click)="sendMessage()"
                            [disabled]="!loginForm.valid">Send</button>
                    </div>
                </form>
            </div>
        </section>
    </div>
</div>
